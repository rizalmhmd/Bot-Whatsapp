/**
 * By: KyzRyzz XD
 * 𝘵𝘦𝘭𝘦: https://t.me/kyzoffc
 * 𝘪𝘯𝘧𝘰: https://s.id/kyzzxd
 * 𝘺𝘵: https://youtube.com/KyzXD
 * 𝘔𝘢𝘬𝘦𝘳: https://whatsapp.com/channel/0029VaRI1OB2P59cTdJKZh3q
 * 🚨Di Larang Menghapus Wm Ini🚨
 * #𝗛𝗮𝗿𝗴𝗮𝗶𝗹𝗮𝗵 𝗣𝗲𝗺𝗯𝘂𝗮𝘁  
**/
const _0x12b463=_0x390d;(function(_0x1c175c,_0x9ed91a){const _0xea262a=_0x390d,_0x3b544a=_0x1c175c();while(!![]){try{const _0x4ddaaf=parseInt(_0xea262a(0x238))/0x1*(-parseInt(_0xea262a(0x23b))/0x2)+-parseInt(_0xea262a(0x209))/0x3+-parseInt(_0xea262a(0x247))/0x4+-parseInt(_0xea262a(0x226))/0x5+parseInt(_0xea262a(0x243))/0x6*(parseInt(_0xea262a(0x249))/0x7)+parseInt(_0xea262a(0x1f0))/0x8*(-parseInt(_0xea262a(0x231))/0x9)+-parseInt(_0xea262a(0x1f9))/0xa*(-parseInt(_0xea262a(0x213))/0xb);if(_0x4ddaaf===_0x9ed91a)break;else _0x3b544a['push'](_0x3b544a['shift']());}catch(_0x2b014a){_0x3b544a['push'](_0x3b544a['shift']());}}}(_0x54e5,0x6d91b));import _0x75f086 from'jimp';import _0x46ac6a from'axios';class GameSession{constructor(_0x333f73,_0x3c9b64){this['id']=_0x333f73,this['players']=[],this['game']=new SnakeAndLadderGame(_0x3c9b64);}}function _0x54e5(){const _0x3c18d5=['isGameStarted','Error\x20fetching\x20image\x20from\x20','currentPlayerIndex','player2Image','1007096zXJGCg','includes','boardSize','players','min','player1ImageUrl','🛑\x20*Permainan\x20sudah\x20dimulai.*\x20Tidak\x20dapat\x20bergabung.','fetchImage','length','20DfVqrb','rollDice','ulartangga','*\x0a\x20\x20-\x20Dari\x20kotak:\x20*','\x20*diinjak\x20oleh*\x20@','keyId','\x20vs\x20@','\x20menang!\x20Selamat!','read','movePlayer','player2ImageUrl','🔄\x20*Sesi\x20permainan\x20direset.*','cellWidth','initializeGame','🎲\x20Anda\x20mendapat\x206,\x20jadi\x20giliran\x20Anda\x20masih\x20berlanjut.','started','1468707GoLBOE','https://i.pinimg.com/originals/be/68/13/be6813a6086681070b0f886d33ca4df9.jpg','🎉\x20@','https://i.pinimg.com/originals/2f/68/a7/2f68a7e1eee18556b055418f7305b3c0.jpg','*\x0a\x20\x20-\x20Ke\x20kotak:\x20*','snakesAndLadders','help','split','🛑\x20*Tidak\x20ada\x20permainan\x20aktif.*\x20Gunakan\x20\x22!snake\x20start\x22\x20untuk\x20memulai\x20permainan\x20baru.','get','11875116bEoVGE','player1Image','👥\x20*Tidak\x20cukup\x20pemain\x20untuk\x20memulai\x20permainan.*\x20Diperlukan\x20minimal\x202\x20pemain.','playTurn','cellHeight','floor','\x20reset\x20:\x20Mereset\x20sesi\x20permainan.','clone','.*\x20Kembali\x20ke\x20awal\x20cell.*','*Anda\x20sudah\x20bergabung\x20atau\x20permainan\x20sudah\x20penuh.*\x20Tidak\x20dapat\x20bergabung.','\x20*ke\x20kotak\x20','bgImage','Maju','rpg','startGame','🕒\x20*Bukan\x20giliranmu.*\x20\x0a\x0aSekarang\x20giliran\x20@','🎲🐍\x20*Permainan\x20Ular\x20Tangga*\x20🐍🎲\x0a\x0a*Commands:*\x0a-\x20','resetSession','binary','2091065ktUzXT','switchPlayer','ular','random','sender','Mundur','composite','start','\x20*melempar\x20dadu.*\x0a\x0a\x20\x20-\x20Dadu:\x20*','sendMsg','\x20*bergabung\x20ke\x20dalam\x20permainan.*','18eDTXhm','end','\x20menemukan\x20','resize','reply','MIME_PNG','addPlayer','1VcCdIE','join','command','542926LAMbQi','tags','bgImageUrl','find','chat','\x20roll\x20:\x20Melempar\x20dadu\x20untuk\x20bergerak.\x0a-\x20','currentPositions','👋\x20@','102mJmxLK','https://i.pinimg.com/originals/75/33/22/7533227c53f6c270a96d364b595d6dd5.jpg','arraybuffer','roll','1713212WlVfbB','🛑\x20*Permainan\x20sudah\x20dimulai.*\x20Tidak\x20dapat\x20memulai\x20ulang.','61355THMDur','\x20help\x20untuk\x20melihat\x20daftar\x20perintah.'];_0x54e5=function(){return _0x3c18d5;};return _0x54e5();}class SnakeAndLadderGame{constructor(_0x5395df){const _0x21ed38=_0x390d;this['sendMsg']=_0x5395df,this[_0x21ed38(0x1f3)]=[],this['boardSize']=0x64,this[_0x21ed38(0x20e)]=[{'start':0x1d,'end':0x7},{'start':0x18,'end':0xc},{'start':0xf,'end':0x25},{'start':0x17,'end':0x29},{'start':0x48,'end':0x24},{'start':0x31,'end':0x56},{'start':0x5a,'end':0x38},{'start':0x4b,'end':0x40},{'start':0x4a,'end':0x5f},{'start':0x5b,'end':0x48},{'start':0x61,'end':0x4e}],this[_0x21ed38(0x241)]={},this[_0x21ed38(0x24d)]=0x0,this['bgImageUrl']=_0x21ed38(0x20c),this['player1ImageUrl']=_0x21ed38(0x244),this['player2ImageUrl']=_0x21ed38(0x20a),this[_0x21ed38(0x21e)]=null,this[_0x21ed38(0x214)]=null,this[_0x21ed38(0x1ef)]=null,this[_0x21ed38(0x205)]=0x28,this[_0x21ed38(0x217)]=0x28,this[_0x21ed38(0x1fe)]=null,this[_0x21ed38(0x208)]=![];}[_0x12b463(0x206)](){const _0x287974=_0x12b463;for(const _0x23d8c7 of this[_0x287974(0x1f3)]){this['currentPositions'][_0x23d8c7]=0x1;}this[_0x287974(0x24d)]=0x0,this['started']=!![];}[_0x12b463(0x1fa)](){const _0x4e63e6=_0x12b463;return Math[_0x4e63e6(0x218)](Math[_0x4e63e6(0x229)]()*0x6)+0x1;}async[_0x12b463(0x202)](_0x5c3556,_0x4764f4){const _0x1b4c94=_0x12b463;if(this[_0x1b4c94(0x1f3)]['length']===0x0)return;const _0x5253f7=this[_0x1b4c94(0x241)][_0x5c3556];let _0x2aa6f3=_0x5253f7+_0x4764f4;for(const _0x4edaf9 of this[_0x1b4c94(0x1f3)]){if(_0x4edaf9!==_0x5c3556&&this['currentPositions'][_0x4edaf9]===_0x2aa6f3){const _0x3b2902='😱\x20*Oh\x20tidak!*\x20@'+_0x5c3556['split']('@')[0x0]+_0x1b4c94(0x1fd)+_0x4edaf9['split']('@')[0x0]+_0x1b4c94(0x21b);await m[_0x1b4c94(0x235)](_0x3b2902,null,{'mentions':[_0x5c3556,_0x4edaf9]}),_0x2aa6f3=0x1;}}const _0x1cfc38=this[_0x1b4c94(0x20e)][_0x1b4c94(0x23e)](_0x397a88=>_0x397a88[_0x1b4c94(0x22d)]===_0x2aa6f3);if(_0x1cfc38)_0x2aa6f3=_0x1cfc38['end'];_0x2aa6f3=Math[_0x1b4c94(0x1f4)](_0x2aa6f3,this['boardSize']),this['currentPositions'][_0x5c3556]=_0x2aa6f3;}async[_0x12b463(0x1f7)](_0x43a60d){const _0x11d3dc=_0x12b463;try{const _0x4f31be=await _0x46ac6a[_0x11d3dc(0x212)](_0x43a60d,{'responseType':_0x11d3dc(0x245)});return await _0x75f086[_0x11d3dc(0x201)](Buffer['from'](_0x4f31be['data'],_0x11d3dc(0x225)));}catch(_0x5f64d1){console['error'](_0x11d3dc(0x24c)+_0x43a60d+':',_0x5f64d1);throw _0x5f64d1;}}async['getBoardBuffer'](){const _0x19ca6e=_0x12b463,_0x3ca92d=new _0x75f086(0x1a4,0x1a4);this[_0x19ca6e(0x21e)][_0x19ca6e(0x234)](0x1a4,0x1a4),_0x3ca92d[_0x19ca6e(0x22c)](this[_0x19ca6e(0x21e)],0x0,0x0);for(const _0x224792 of this[_0x19ca6e(0x1f3)]){const _0x2d02cf=this[_0x19ca6e(0x241)][_0x224792],_0x4a4ca5=_0x224792===this[_0x19ca6e(0x1f3)][0x0]?this[_0x19ca6e(0x214)]:this[_0x19ca6e(0x1ef)],_0x20e337=(_0x2d02cf-0x1)%0xa*this['cellWidth']+0xa,_0x5fbd09=(0x9-Math[_0x19ca6e(0x218)]((_0x2d02cf-0x1)/0xa))*this[_0x19ca6e(0x217)]+0xa;_0x3ca92d['composite'](_0x4a4ca5[_0x19ca6e(0x21a)]()[_0x19ca6e(0x234)](this[_0x19ca6e(0x205)],this[_0x19ca6e(0x217)]),_0x20e337,_0x5fbd09);}return _0x3ca92d['getBufferAsync'](_0x75f086[_0x19ca6e(0x236)]);}async[_0x12b463(0x221)](_0x17e950,_0x278f0c,_0x4c1cb8){const _0x591cd2=_0x12b463;await _0x17e950['reply']('🐍🎲\x20*Selamat\x20datang\x20di\x20Permainan\x20Ular\x20Tangga!*\x20🎲🐍\x20\x0a\x0a@'+_0x278f0c[_0x591cd2(0x210)]('@')[0x0]+_0x591cd2(0x1ff)+_0x4c1cb8[_0x591cd2(0x210)]('@')[0x0],null,{'mentions':[_0x278f0c,_0x4c1cb8]}),this[_0x591cd2(0x1f3)]=[_0x278f0c,_0x4c1cb8],this[_0x591cd2(0x206)]();if(!this['bgImage'])this[_0x591cd2(0x21e)]=await this[_0x591cd2(0x1f7)](this[_0x591cd2(0x23d)]);if(!this[_0x591cd2(0x214)])this[_0x591cd2(0x214)]=await this[_0x591cd2(0x1f7)](this[_0x591cd2(0x1f5)]);if(!this[_0x591cd2(0x1ef)])this[_0x591cd2(0x1ef)]=await this[_0x591cd2(0x1f7)](this[_0x591cd2(0x203)]);const _0xf1cf74=await this['getBoardBuffer'](),{key:_0x321f49}=await _0x17e950[_0x591cd2(0x235)](_0xf1cf74);this[_0x591cd2(0x1fe)]=_0x321f49;}async[_0x12b463(0x216)](_0x1c010d,_0x3573fc){const _0x5cd20c=_0x12b463;if(!this[_0x5cd20c(0x1f3)][_0x5cd20c(0x1f8)]){await _0x1c010d[_0x5cd20c(0x235)](_0x5cd20c(0x211));return;}if(_0x3573fc!==this[_0x5cd20c(0x1f3)][this[_0x5cd20c(0x24d)]]){await _0x1c010d[_0x5cd20c(0x235)](_0x5cd20c(0x222)+this[_0x5cd20c(0x1f3)][this[_0x5cd20c(0x24d)]]['split']('@')[0x0],null,{'mentions':[this[_0x5cd20c(0x1f3)][this[_0x5cd20c(0x24d)]]]});return;}const _0x15fa16=this[_0x5cd20c(0x1fa)]();await _0x1c010d[_0x5cd20c(0x235)]('🎲\x20@'+_0x3573fc['split']('@')[0x0]+_0x5cd20c(0x22e)+_0x15fa16+_0x5cd20c(0x1fc)+this[_0x5cd20c(0x241)][_0x3573fc]+_0x5cd20c(0x20d)+(this[_0x5cd20c(0x241)][_0x3573fc]+_0x15fa16)+'*',null,{'mentions':[_0x3573fc]});if(_0x15fa16!==0x6){this[_0x5cd20c(0x202)](_0x3573fc,_0x15fa16);const _0x54600d=this['snakesAndLadders'][_0x5cd20c(0x23e)](_0x1f1edf=>_0x1f1edf[_0x5cd20c(0x22d)]===this[_0x5cd20c(0x241)][_0x3573fc]);if(_0x54600d){const _0x442c0b=_0x54600d[_0x5cd20c(0x232)]<_0x54600d[_0x5cd20c(0x22d)]?_0x5cd20c(0x22b):_0x5cd20c(0x21f);await _0x1c010d[_0x5cd20c(0x235)]('🐍\x20@'+_0x3573fc['split']('@')[0x0]+_0x5cd20c(0x233)+(_0x442c0b==='Mundur'?_0x5cd20c(0x228):'tangga')+'!\x20'+_0x442c0b+_0x5cd20c(0x21d)+_0x54600d['end']+'.*',null,{'mentions':[_0x3573fc]}),this[_0x5cd20c(0x241)][_0x3573fc]=_0x54600d[_0x5cd20c(0x232)];}}_0x15fa16!==0x6?this[_0x5cd20c(0x227)]():(await _0x1c010d['reply'](_0x5cd20c(0x207)),this['movePlayer'](_0x3573fc,_0x15fa16));this[_0x5cd20c(0x241)][_0x3573fc]===this[_0x5cd20c(0x1f2)]&&(await _0x1c010d['reply'](_0x5cd20c(0x20b)+_0x3573fc[_0x5cd20c(0x210)]('@')[0x0]+_0x5cd20c(0x200),null,{'mentions':[_0x3573fc]}),this[_0x5cd20c(0x224)]());const _0x200deb=await this['getBoardBuffer'](),_0x317f4b=this[_0x5cd20c(0x22f)];await _0x317f4b['sendMessage'](_0x1c010d[_0x5cd20c(0x23f)],{'delete':this[_0x5cd20c(0x1fe)]});const {key:_0x157ccd}=await _0x1c010d[_0x5cd20c(0x235)](_0x200deb);this[_0x5cd20c(0x1fe)]=_0x157ccd;return;}[_0x12b463(0x237)](_0x39eaad){const _0x23701d=_0x12b463;return this[_0x23701d(0x1f3)][_0x23701d(0x1f8)]<0x2&&!this[_0x23701d(0x1f3)][_0x23701d(0x1f1)](_0x39eaad)&&_0x39eaad!==''?(this['players']['push'](_0x39eaad),!![]):![];}[_0x12b463(0x227)](){this['currentPlayerIndex']=0x1-this['currentPlayerIndex'];}[_0x12b463(0x224)](){const _0x456551=_0x12b463;this['players']=[],this['currentPositions']={},this[_0x456551(0x24d)]=0x0,this[_0x456551(0x208)]=![];}[_0x12b463(0x24b)](){return this['started'];}}const handler=async(_0x17aa75,{args:_0xc0c0a7,usedPrefix:_0x14ee7b,command:_0x4ce0d0})=>{const _0x7df57a=_0x12b463;conn['ulartangga']=conn[_0x7df57a(0x1fb)]||{};const _0x2fe011=conn['ulartangga_']=conn['ulartangga_']||{},_0xe7c68c=_0x17aa75[_0x7df57a(0x23f)],_0x14bdfc=_0x2fe011[_0xe7c68c]||(_0x2fe011[_0xe7c68c]=new GameSession(_0xe7c68c,conn)),_0xdb07ff=_0x14bdfc['game'],{state:_0x1db8fd}=conn['ulartangga'][_0x17aa75['chat']]||{'state':![]};switch(_0xc0c0a7[0x0]){case _0x7df57a(0x239):if(_0x1db8fd)return _0x17aa75[_0x7df57a(0x235)](_0x7df57a(0x1f6));const _0x371f64=_0x17aa75[_0x7df57a(0x22a)],_0x2760c4=_0xdb07ff[_0x7df57a(0x237)](_0x371f64);_0x2760c4?_0x17aa75[_0x7df57a(0x235)](_0x7df57a(0x242)+_0x371f64[_0x7df57a(0x210)]('@')[0x0]+_0x7df57a(0x230),null,{'mentions':[_0x371f64]}):_0x17aa75['reply'](_0x7df57a(0x21c));break;case _0x7df57a(0x22d):if(_0x1db8fd)return _0x17aa75[_0x7df57a(0x235)](_0x7df57a(0x248));conn['ulartangga'][_0x17aa75[_0x7df57a(0x23f)]]={...conn[_0x7df57a(0x1fb)][_0x17aa75[_0x7df57a(0x23f)]],'state':!![]};_0xdb07ff[_0x7df57a(0x1f3)][_0x7df57a(0x1f8)]===0x2?await _0xdb07ff[_0x7df57a(0x221)](_0x17aa75,_0xdb07ff[_0x7df57a(0x1f3)][0x0],_0xdb07ff[_0x7df57a(0x1f3)][0x1]):await _0x17aa75[_0x7df57a(0x235)](_0x7df57a(0x215));break;case _0x7df57a(0x246):if(!_0x1db8fd)return _0x17aa75[_0x7df57a(0x235)]('🛑\x20*Permainan\x20belum\x20dimulai.*\x20Ketik\x20\x22!snake\x20start\x22\x20untuk\x20memulai.');if(_0xdb07ff['isGameStarted']()){const _0x319b9e=_0xdb07ff['players'][_0xdb07ff[_0x7df57a(0x24d)]];_0x17aa75[_0x7df57a(0x22a)]!==_0x319b9e?await _0x17aa75[_0x7df57a(0x235)](_0x7df57a(0x222)+_0x319b9e[_0x7df57a(0x210)]('@')[0x0],null,{'mentions':[_0x319b9e]}):await _0xdb07ff[_0x7df57a(0x216)](_0x17aa75,_0x319b9e);}else await _0x17aa75[_0x7df57a(0x235)]('🛑\x20*Permainan\x20belum\x20dimulai.*\x20Ketik\x20\x22!snake\x20start\x22\x20untuk\x20memulai.');break;case'reset':conn[_0x7df57a(0x1fb)][_0x17aa75[_0x7df57a(0x23f)]]={...conn[_0x7df57a(0x1fb)][_0x17aa75[_0x7df57a(0x23f)]],'state':![]},_0x14bdfc['game'][_0x7df57a(0x224)](),delete _0x2fe011[_0xe7c68c],await _0x17aa75[_0x7df57a(0x235)](_0x7df57a(0x204));break;case _0x7df57a(0x20f):await _0x17aa75[_0x7df57a(0x235)](_0x7df57a(0x223)+(_0x14ee7b+_0x4ce0d0)+'\x20join\x20:\x20Bergabung\x20ke\x20dalam\x20permainan.\x0a-\x20'+(_0x14ee7b+_0x4ce0d0)+'\x20start\x20:\x20Memulai\x20permainan.\x0a-\x20'+(_0x14ee7b+_0x4ce0d0)+_0x7df57a(0x240)+(_0x14ee7b+_0x4ce0d0)+_0x7df57a(0x219));break;default:_0x17aa75[_0x7df57a(0x235)]('❓\x20*Perintah\x20tidak\x20valid.*\x20Gunakan\x20'+(_0x14ee7b+_0x4ce0d0)+_0x7df57a(0x24a));}};handler[_0x12b463(0x20f)]=['ulartangga'],handler[_0x12b463(0x23c)]=[_0x12b463(0x220)],handler[_0x12b463(0x23a)]=/^(ular(tangga)?|ladders|snak(e)?)$/i;function _0x390d(_0x5ef4f2,_0x354496){const _0x54e520=_0x54e5();return _0x390d=function(_0x390d6b,_0x422270){_0x390d6b=_0x390d6b-0x1ef;let _0x3360a4=_0x54e520[_0x390d6b];return _0x3360a4;},_0x390d(_0x5ef4f2,_0x354496);}export default handler;